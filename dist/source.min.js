define(["jquery"],function(a){function b(a){return a.reduce(function(a,b){return""+a+(""!==a?",":"")+b},"")}function c(a,b){d.hasClass("google-maps-loaded")?b():(window.googleMapsCallbacks=window.googleMapsCallbacks||{},window.googleMapsCallbacks[a]=b)}var d=a("body"),e={},f={validateAddress:function(a){var b=new google.maps.Geocoder;b.geocode({address:a.origAddress},function(b,c){c==google.maps.GeocoderStatus.OK&&-1!=b[0].types.indexOf("street_address")?a.success(a.origAddress,b):a.fail(a.origAddress,b)})},autoComplete:function(b){var c=b.$je;if(!c.hasClass("google-auto-complete-attached")){c.addClass("google-auto-complete-attached");var d={};"city"==b.type&&(d.types=["(cities)"],d.componentRestrictions={country:"us"});var e=new google.maps.places.Autocomplete(c[0],d);google.maps.event.addListener(e,"place_changed",function(){var d=e.getPlace();d&&d.address_components&&d.address_components.forEach(function(d){var f="",g="";-1!=d.types.indexOf("locality")?(f="city",g=d.long_name):-1!=d.types.indexOf("administrative_area_level_1")?(f="state",g=d.short_name):-1!=d.types.indexOf("postal_code")&&(f="postal_code",g=d.long_name),a("input[name='"+f+"']",c.parent()).val(g),b.change&&b.change(g,e)})})}}};return window.googleMapsInitialized=function(){d.removeClass("google-maps-loading").addClass("google-maps-loaded"),window.googleMapsCallbacks&&setTimeout(function(){a.each(window.googleMapsCallbacks,function(a,b){b()})},100)},e.load=function(a,c){if(!d.hasClass("google-maps-loaded")&&!d.hasClass("google-maps-loading")){d.addClass("google-maps-loading");var e=document.createElement("script");e.type="text/javascript",e.src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries="+b(c)+"&key="+a+"&callback=googleMapsInitialized",document.body.appendChild(e)}},a.each(f,function(a,b){"load"!=a&&(e[a]=function(d){c(a,function(){b(d)})})}),e});