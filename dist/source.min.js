define(["jquery"],function(a){function b(a){return a.reduce(function(a,b){return""+a+(""!==a?",":"")+b},"")}function c(a,b){d.hasClass("google-maps-loaded")?b():(window.googleMapsCallbacks=window.googleMapsCallbacks||{},window.googleMapsCallbacks[a]=b)}var d=a("body"),e={},f={validateAddress:function(a){var b=new google.maps.Geocoder;b.geocode({address:a.origAddress},function(b,c){c==google.maps.GeocoderStatus.OK&&-1!=b[0].types.indexOf("street_address")?a.success(a.origAddress,b):a.fail(a.origAddress,b)})},autoComplete:function(b,c){var d=b.$je;if(!d.hasClass("google-auto-complete-attached")){d.addClass("google-auto-complete-attached");var e={};"city"==b.type&&(e.types=["(cities)"],e.componentRestrictions={country:"us"});var f=new google.maps.places.Autocomplete(d[0],e);google.maps.event.addListener(f,"place_changed",function(){var b=f.getPlace();b&&b.address_components&&b.address_components.forEach(function(b){var e="",g="";-1!=b.types.indexOf("locality")?(e="city",g=b.long_name):-1!=b.types.indexOf("administrative_area_level_1")?(e="state",g=b.short_name):-1!=b.types.indexOf("postal_code")&&(e="postal_code",g=b.long_name),a("input[name='"+e+"']",d.parent()).val(g),c&&c(g,f)})})}}};return window.googleMapsInitialized=function(){d.removeClass("google-maps-loading").addClass("google-maps-loaded"),window.googleMapsCallbacks&&setTimeout(function(){a.each(window.googleMapsCallbacks,function(a,b){b()})},100)},e.load=function(a,c){if(!d.hasClass("google-maps-loaded")&&!d.hasClass("google-maps-loading")){d.addClass("google-maps-loading");var e=document.createElement("script");e.type="text/javascript",e.src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries="+b(c)+"&key="+a+"&callback=googleMapsInitialized",document.body.appendChild(e)}},a.each(f,function(a,b){"load"!=a&&(e[a]=function(d){c(a,function(){b(d)})})}),e});